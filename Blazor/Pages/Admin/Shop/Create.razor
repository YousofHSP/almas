@page "/Admin/Shops/Create"
@layout AdminLayout
@inject IAdminShopService Service
@inject NavigationManager NavigationManager

<EditForm Model="@_shop" OnValidSubmit="@Submit">
        <DataAnnotationsValidator />
        <ValidationSummary class="text-error" />
        <div class="card w-1/2">
            <div class="card-body">
                <div class="form-control">
                    <label class="label">
                        <span class="label-text">عنوان</span>
                    </label>
                    <InputText id="title" class="input input-bordered" @bind-Value="_shop!.Title"></InputText>
                    
                </div>
                <div class="form-control">
                    <label class="label">
                        <span class="label-text">توضیحات</span>
                    </label>
                    <InputTextArea id="description" class="input input-bordered" @bind-Value="_shop!.Description"></InputTextArea>
                </div>
                <button class="btn btn-outline" type="submit">ثبت</button>
            </div>
        </div>
    </EditForm>

@code {
    ShopDto? _shop = new ShopDto();
    private async void Submit()
    {
        if (_shop is null) return;
        var response = await Service.Update(_shop.Id,_shop);
        if(response is not null) NavigationManager.NavigateTo("/Admin/Shops");
    }

}